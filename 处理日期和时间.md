### 概念

**理解日期、时间和时刻**

理解时区的概念

- GMT+08:00和UTC+08:00基本是等价的，只是UTC更加精确
- CST中国标准时间，或者美国中部标准时间，尽量不要使用缩写

Asia/Shanghai

理解夏令时，同一地区用GMT/UTC和城市表示的时区可能导致时间不同

- 中国已经不用，美国继续使用，夏令时北京时间比纽约时间早12小时，冬天早13小时

![1554830338398](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1554830338398.png)

理解Locale用来针对当地用户习惯**格式化日期、时间、数字、货币**等

![1554830371826](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1554830371826.png)

### Date

**时间存储方式**

- Epoch Time：从1970-01-01 00:00:00 到现在的毫秒数
  - new Date().getTime()获取long
- GMT+0:00开始到现在的秒数

JDK有新旧两套API处理日期和时间

![1554830559704](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1554830559704.png)

java.util.Date表示日期和时间，内部使用long表示epoch毫秒数

Date和long的转换

**SimpleDateFormat**：用于Date和String的解析和格式化

格式化字符串的定义：

浏览器搜索：java SimpleDateFormat

https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html

![1554831201033](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1554831201033.png)

Locale表示用户所在地区的日期、时间、数字、货币等格式。

#### 时间解析：

```java
// 按系统Locale解析日期时间：
		String s1 = "2016-11-20 12:15:59";
		Date date1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").parse(s1);
		System.out.println(date1);
		// 解析MMM时默认按照系统Locale:
		String s2 = "Nov/20/2016 12:15:59";
		Date date2 = new SimpleDateFormat("MMM/dd/yyyy HH:mm:ss",Locale.US).parse(s2);
		System.out.println(date2);
		// 按ISO 8601标准格式解析：
		String iso = "2016-11-20T12:15:59";
		Date date3 = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").parse(iso);
		System.out.println(date3);
```

#### 时间格式化

```java
// 获取当前时间:
		Date now = new Date();
		// 指定格式打印:
		SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
		System.out.println(sdf.format(now));
```

#### **Date的缺陷：**

- 不能转换时区
- 日期时间加减
- 两个日期相差时间天数
- 计算某个月第一个星期一

### Calendar

注意：

- 月份从0开始，1月＝0所以月份+1
- 星期从周日开始，星期日＝1所以星期-1

Calendar和Date、long可以互相转换

```java
// 获取当前时间表示的Calendar:
		Calendar c = Calendar.getInstance();
		// 转换为Date打印：
		System.out.println(c.getTime());
		// + 5 days:
		c.add(Calendar.DAY_OF_MONTH, 5);
		// - 2 hours:
		c.add(Calendar.HOUR_OF_DAY, -2);
		// 转换为Date打印：
		System.out.println(c.getTime());
```



- Date **getTime()获取Date对象**
- long getTimeInMillis()获取epoch时间

Calendar可以用set/get设置和获取指定字段

Calendar可以实现：

* 设置特定的日期和时间
* 设置时区并获得转换后的时间
* 加减日期和时间

TimeZone表示时区，getAvailableIDs()可以枚举所有有效的时区ID

```java
// 获取当前时间:
		Calendar c = Calendar.getInstance();
		System.out.println(c.getTime());
		// 获取纽约时间:
		c.setTimeZone(TimeZone.getTimeZone("America/New_York"));
		int y = c.get(Calendar.YEAR);
		int m = c.get(Calendar.MONTH) + 1;
		int d = c.get(Calendar.DAY_OF_MONTH);
		int hh = c.get(Calendar.HOUR_OF_DAY);
		int mm = c.get(Calendar.MINUTE);
		int ss = c.get(Calendar.SECOND);
		System.out.println(y + "-" + m + "-" + d + " " + hh + ":" + mm + ":" + ss);
		
		String[] s=TimeZone.getAvailableIDs();
		for (String string : s) {
			System.out.println(string);
		}
```

输出：

```java
Wed Apr 10 01:50:42 CST 2019
2019-4-9 13:50:42
Africa/Abidjan
Africa/Accra
...
```

